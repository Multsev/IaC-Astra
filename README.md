# Инфраструктура для ГК Astra Linux
![Astra Linux](https://upload.wikimedia.org/wikipedia/ru/thumb/8/86/Astra_Linux.png/1920px-Astra_Linux.png)

## Описание системы
Виртуальная среда на гипервизоре VirtualBox, состоящая из 3х виртуальных машин: 

### Виртуальная машина №1
  - Имя хоста: machine-1.test.local
  - Операционная система: CentOS 7
  - Виртуальные процессоры: 2 vCPU
  - Оперативная память: 4 Gb
  - Сетевой адаптер 1:
    - Тип: Bridge
    - Виртуальная машина имеет статический IP адрес: 192.168.99.211/24
  - Сетевой адаптер 2:
    - Тип: NAT
    - Порт 80 гостевой ОС проброшен на порт 8080 хостовой ОС
  - Роль Ansible:
    - FreeIPA Server

### Виртуальная машина №2
  - Имя хоста: machine-2.test.local
  - Операционная система: CentOS 7
  - Виртуальные процессоры: 2 vCPU
  - Оперативная память: 4 Gb
  - Сетевой адаптер 1:
    - Тип: Bridge
    - Виртуальная машина имеет статический IP адрес: 192.168.99.212/24
  - Сетевой адаптер 2:
    - Тип: NAT
    - Порт 80 гостевой ОС проброшен на порт 8081 хостовой ОС
  - Роль Ansible:
    - FreeIPA Client
    - Foreman

### Виртуальная машина №3
  - Имя хоста: machine-3.test.local
  - Операционная система: CentOS 7
  - Виртуальные процессоры: 2 vCPU
  - Оперативная память: 4 Gb
  - Сетевой адаптер 1:
    - Тип: Bridge
    - Виртуальная машина имеет статический IP адрес: 192.168.99.212/24
  - Сетевой адаптер 2:
    - Тип: NAT
    - Порт 80 гостевой ОС проброшен на порт 8081 хостовой ОС
  - Роль Ansible:
    - FreeIPA Client
    - Zabbix ( docker container )

---

## Как запустить
  1. Убедиться что компьютер соответствует системным требованиям
  2. Клонировать репозиторий
  3. Изменить IP адреса виртуальных машин в Vagrantfile на адреса в вашей локальной сети 
  4. В папке проекта выполнить: make up

### Требования
Для запуска инфраструктуры, вам нужно загрузить и установить следующее ПО:
  1. [VirtualBox](https://www.virtualbox.org/wiki/Downloads)
  2. [Vagrant](https://www.vagrantup.com/downloads.html)
  3. [Ansible](http://docs.ansible.com/ansible/latest/intro_installation.html)
  4. [Make](https://www.gnu.org/software/make/)

### Команда для быстрого запуска
```console
git clone https://github.com/Multsev/IaC-Astra.git && cd ./IaC-Astra && \
make up
```

---

### Команды Makefile'а
  1. make up - собирает проект, предварительно устанавливая зависимости для Ansible
  2. make clean - удаляет все созданные виртуальные машины
  3. make provision - запускает конфигурирование уже запущенных хостов
  4. make reload - обновляет конфигурацию виртуальных машин